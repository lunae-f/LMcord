version: '3.8'

services:
  discord-bot:
    build: .
    container_name: llm-discord-bot
    restart: unless-stopped
    env_file:
      - .env
    environment:
      - DISCORD_TOKEN=${DISCORD_TOKEN}
      - OPENAI_API_KEY=${OPENAI_API_KEY}
      - OPENAI_PLATFORM=${OPENAI_PLATFORM:-google}
      - OPENAI_BASE_URL=${OPENAI_BASE_URL:-https://generativelanguage.googleapis.com/v1beta/openai/}
      - OPENAI_MODEL=${OPENAI_MODEL:-gemini-3-flash-preview}
      - CHANNEL_HISTORY_LIMIT=${CHANNEL_HISTORY_LIMIT:-50}
      - REPLY_CHAIN_LIMIT=${REPLY_CHAIN_LIMIT:-50}
      - ENABLE_WEB_SEARCH=${ENABLE_WEB_SEARCH:-true}
      - SEARCH_PROVIDER=${SEARCH_PROVIDER:-tavily}
      - TAVILY_API_KEY=${TAVILY_API_KEY}
