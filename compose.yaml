services:
  discord-bot:
    build: .
    container_name: lmcord-bot
    restart: unless-stopped
    env_file:
      - .env
    environment:
      - DISCORD_TOKEN=${DISCORD_TOKEN}
      - GOOGLE_API_KEY=${GOOGLE_API_KEY}
      - ENABLE_GOOGLE_GROUNDING=${ENABLE_GOOGLE_GROUNDING:-true}
      - OPENAI_API_KEY=${OPENAI_API_KEY}
      - OPENAI_BASE_URL=${OPENAI_BASE_URL}
      - CHANNEL_HISTORY_LIMIT=${CHANNEL_HISTORY_LIMIT:-50}
      - REPLY_CHAIN_LIMIT=${REPLY_CHAIN_LIMIT:-50}
      - PERSONA=${PERSONA}
      - ENABLE_WEB_SEARCH=${ENABLE_WEB_SEARCH:-true}
      - SEARCH_PROVIDER=${SEARCH_PROVIDER:-tavily}
      - TAVILY_API_KEY=${TAVILY_API_KEY}
    volumes:
      - ./data:/app/data
      - ./profiles.json:/app/profiles.json